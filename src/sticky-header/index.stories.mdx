import { Fragment, useRef, useState } from 'react';
import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { withKnobs, boolean } from '@storybook/addon-knobs';
import '../shared/critical-path.scss';
import StickyHeader from './';

export const hideElement = (hideElement) => boolean('Hide element', hideElement);

export const ExampleContent = () => (
  <Fragment>
    <h2>Section title</h2>
    <p>
      Ik kie neġi æpude pōsÞpriskribo, anċ ēg tiel subtegmenÞo. Giga gārði esperǣntigo vi jes. Ċit
      plēj esceptīnte hu, ōl vola eksploðæ poǽ. Ōīð gh pǽƿjo s&apos;joro pronomeċa, mi paki vice
      fiksa vir. Trǣ kibi multa ok, sur ðū īnfāno kæŭze. Om ene modō sekvanta proksimumecō, ānÞ sh
      tiele hiper defīnītive.
    </p>
  </Fragment>
);

export const StickyHeaderStoryContainer = ({ children }) => {
  const containerRef = useRef();
  return (
    <div ref={containerRef} style={{ height: 3000, position: 'relative' }}>
      {children({ containerRef })}
    </div>
  );
};

<Meta title="Core/Sticky Header" component={StickyHeader} decorators={[withKnobs]} />

# Sticky header component

TKTK

<Canvas>
  <Story name="With single child element">
    <StickyHeaderStoryContainer>
      {({ containerRef }) => (
        <div>
          <h1>Title</h1>
          <StickyHeader containerRef={containerRef}>
            <div style={{ height: 30, backgroundColor: 'white', borderBottom: '1px solid black' }}>
              Sticky header child
            </div>
          </StickyHeader>
          <ExampleContent />
        </div>
      )}
    </StickyHeaderStoryContainer>
  </Story>
</Canvas>

<Canvas>
  <Story name="With shadow on scroll up">
    <StickyHeaderStoryContainer>
      {({ containerRef }) => (
        <div>
          <h1>Title</h1>
          <StickyHeader containerRef={containerRef}>
            {({ isSticky, scrollDirection }) => (
              <div
                style={{
                  height: 30,
                  backgroundColor: 'white',
                  borderBottom: '1px solid black',
                  transition: 'box-shadow 0.5s',
                  boxShadow:
                    isSticky && scrollDirection === 'up'
                      ? '0 4px 6px 0 rgba(77, 72, 69, 0.1), 0 1px 2px 0 rgba(77, 72, 69, 0.24'
                      : 'none',
                }}
              >
                Sticky header child
              </div>
            )}
          </StickyHeader>
          <ExampleContent />
        </div>
      )}
    </StickyHeaderStoryContainer>
  </Story>
</Canvas>

<Canvas>
  <Story name="With changing height of children">
    <StickyHeaderStoryContainer>
      {({ containerRef }) => (
        <div>
          <h1>Title</h1>
          <StickyHeader containerRef={containerRef}>
            {({ ref }) => (
              <div ref={ref}>
                <div
                  style={{ height: 30, backgroundColor: 'white', borderBottom: '1px solid black' }}
                >
                  Sticky header child
                </div>
                <div
                  style={{
                    height: 30,
                    backgroundColor: 'yellow',
                    borderBottom: '1px solid black',
                    display: hideElement(false) ? 'none' : 'block',
                  }}
                >
                  Sticky header child 2
                </div>
              </div>
            )}
          </StickyHeader>
          <ExampleContent />
          <ExampleContent />
          <ExampleContent />
        </div>
      )}
    </StickyHeaderStoryContainer>
  </Story>
</Canvas>
