import { useState } from 'react';
import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import ButtonToggle from './';

export const StateWrapper = ({ children, initialState }) => {
  const [state, setState] = useState(initialState);
  return <div>{children({ state, setState })}</div>;
};

<Meta title="Local/Button Toggle" component={ButtonToggle} />

# Button Toggle component

`<ButtonToggle />` can be used to add a radio-button/toggle like input to a page

Props:

- `title` (string - optional): label to be displayed above buttons
- `items` (array of `{ value: (string), display: (node) }`): list of items to be displayed as buttons
- `selectedItem` (string): the current active item - should match a value from the `items` array
- `onToggle` (function): function to run on toggle/button click
- `width` (string or number - optional): sets fixed width for group of buttons
- `equalButtons` (boolean - optional): makes buttons equal in width (half of parent or fixed width), true by default

o-buttons props (see origami documentation [here](https://github.com/Financial-Times/o-buttons)):

- `big` (boolean - optional): use o-buttons big style, true by default
- `inverse` (boolean - optional): inverts button and title style
- `theme` (string - optional): sets theme from available o-butttons theme, mono by default

<Canvas>
  <Story name="Default">
    <StateWrapper initialState="a">
      {({ state, setState }) => (
        <ButtonToggle
          items={[
            { value: 'a', display: 'Item A' },
            { value: 'b', display: 'Item B' },
          ]}
          selectedItem={state}
          onToggle={(value) => setState(value)}
        />
      )}
    </StateWrapper>
  </Story>
</Canvas>

<Canvas>
  <Story name="Equal buttons width custom width">
    <StateWrapper initialState="a">
      {({ state, setState }) => (
        <ButtonToggle
          items={[
            { value: 'a', display: 'Item A' },
            { value: 'b', display: 'Bigger Item B' },
          ]}
          selectedItem={state}
          onToggle={(value) => setState(value)}
          width={300}
        />
      )}
    </StateWrapper>
  </Story>
</Canvas>

<Canvas>
  <Story name="Unequal buttons">
    <StateWrapper initialState="a">
      {({ state, setState }) => (
        <ButtonToggle
          items={[
            { value: 'a', display: 'Item A' },
            { value: 'b', display: 'Bigger Item B' },
          ]}
          selectedItem={state}
          onToggle={(value) => setState(value)}
          equalButtons={false}
        />
      )}
    </StateWrapper>
  </Story>
</Canvas>

<Canvas>
  <Story name="With title">
    <StateWrapper initialState="a">
      {({ state, setState }) => (
        <ButtonToggle
          title="Button toggle"
          items={[
            { value: 'a', display: 'Item A' },
            { value: 'b', display: 'Item B' },
          ]}
          selectedItem={state}
          onToggle={(value) => setState(value)}
          width={300}
        />
      )}
    </StateWrapper>
  </Story>
</Canvas>

<Canvas>
  <Story name="Inverted">
    <div style={{ backgroundColor: '#262a33', padding: '1em' }}>
      <StateWrapper initialState="a">
        {({ state, setState }) => (
          <ButtonToggle
            title="Button toggle"
            items={[
              { value: 'a', display: 'Item A' },
              { value: 'b', display: 'Item B' },
            ]}
            selectedItem={state}
            onToggle={(value) => setState(value)}
            width={300}
            inverse={true}
          />
        )}
      </StateWrapper>
    </div>
  </Story>
</Canvas>
